<?xml version="1.0" encoding="UTF-8"?>

<OperationDefinition xmlns="http://hl7.org/fhir">
  <id value="Operation"/>
  <text>
    <status value="extensions"/><div xmlns="http://www.w3.org/1999/xhtml"><h2>$everything</h2><p>OPERATION: $everything</p><p>The official URL for this operation definition is: </p><pre>http://hl7.org/fhir/OperationDefinition/Patient-everything</pre><div><p>Las principales diferencias entre esta operación y la simple búsqueda en el compartimento del paciente son</p>
<p>•	A menos que el cliente solicite lo contrario, el servidor devuelve todo el conjunto de resultados en un solo paquete (en lugar de utilizar la paginación)</p>
<p>•	Al servidor es responsable de determinar qué recursos debe devolver como recursos incluidos (en lugar de que el cliente especifique cuáles).
Esto libera al cliente de la necesidad de determinar lo que podría o debería pedir, especialmente en lo que respecta a los recursos incluidos. Los servidores deben considerar la devolución de Provenance y AuditTrail apropiados en los recursos devueltos, aunque éstos no formen parte directamente del compartimento del paciente.</p>
<p>Se supone que el servidor ha identificado y asegurado el contexto adecuadamente, y puede asociar el contexto de autorización con un único paciente, o determinar si el contexto tiene los derechos del paciente nominado, si lo hay, o puede determinar una lista apropiada de pacientes para los que proporcionar datos a partir del contexto de la solicitud. Si no hay un paciente nominado (GET /Patient/$everything) y el contexto no está asociado a un único registro de paciente, la lista real de pacientes es la de todos los pacientes a los que el usuario asociado a la solicitud tiene acceso. Puede tratarse de todos los pacientes de la familia a los que el paciente tiene acceso, o puede tratarse de todos los pacientes a los que un proveedor de atención tiene acceso, o de todos los pacientes del sistema de registros completo. En estos casos, el servidor puede optar por devolver un error en lugar de todos los registros. La especificación de la relación entre el contexto, un usuario y los registros de los pacientes está fuera del alcance de esta especificación (aunque véase la guía de implementación de Smart App Launch.</p>
<p>Cuando esta operación se utiliza para acceder a varios registros de pacientes a la vez, el paquete de retorno podría ser bastante grande; los servidores pueden optar por exigir que dichas solicitudes se realicen de forma asíncrona y se asocien a formatos de datos masivos. Por otra parte, los clientes pueden optar por hojear el conjunto de resultados (o los servidores pueden exigirlo). La paginación de los resultados se realiza de la misma manera que la búsqueda, utilizando el parámetro _count y los enlaces Bundle. Los implementadores deben tener en cuenta que la paginación será más lenta que la simple devolución de todos los resultados a la vez (más tráfico de red, múltiples retrasos de latencia), pero puede ser necesaria para no agotar la memoria disponible leyendo o escribiendo toda la respuesta en un solo paquete. A diferencia de la búsqueda, no hay un orden inherente al usuario para la operación $everything. Los servidores pueden considerar la posibilidad de ordenar los recursos devueltos en orden descendente de la última actualización del registro, pero no están obligados a hacerlo.</p>
<p>El parámetro *since se proporciona para soportar consultas periódicas para obtener información adicional que ha cambiado sobre el paciente desde la última consulta. Esto significa que el parámetro _since se basa en la hora del registro. El valor del parámetro *since debe ajustarse a la hora del servidor. Si se utiliza la respuesta directa, se trata de la marca de tiempo en la cabecera de la respuesta. Si se utiliza la interfaz asíncrona, se trata de la marca de tiempo de la transacción en la respuesta json. Los servidores deben asegurarse de que las marcas de tiempo se gestionen de forma que el cliente no pierda ningún cambio. Los clientes deben ser capaces de obtener la misma respuesta más de una vez en el caso de que la transacción caiga en un límite de tiempo. Los clientes deben asegurarse de que los demás parámetros de consulta sean constantes para garantizar un conjunto coherente de registros al realizar consultas periódicas.</p>
</div><p>URL: [base]/Patient/$everything</p><p>URL: [base]/Patient/[id]/$everything</p><p>Parameters</p><table class="grid"><tr><td><b>Use</b></td><td><b>Name</b></td><td><b>Cardinality</b></td><td><b>Type</b></td><td><b>Binding</b></td><td><b>Documentation</b></td></tr><tr><td>IN</td><td>start</td><td>0..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#date">date</a></td><td/><td><div><p>El intervalo de fechas se refiere a las fechas de la atención, no a las fechas de la moneda del registro; por ejemplo, todos los registros relativos a la atención prestada en un determinado intervalo de fechas. Si no se proporciona una fecha de inicio, todos los registros anteriores a la fecha de finalización están en el ámbito de aplicación.</p>
</div></td></tr><tr><td>IN</td><td>end</td><td>0..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#date">date</a></td><td/><td><div><p>El intervalo de fechas se refiere a las fechas de la atención, no a las fechas de la moneda del registro; por ejemplo, todos los registros relativos a la atención prestada en un determinado intervalo de fechas. Si no se proporciona una fecha de finalización, todos los registros posteriores a la fecha de inicio están en el ámbito de aplicación.</p>
</div></td></tr><tr><td>IN</td><td>_since</td><td>0..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#instant">instant</a></td><td/><td><div><p>Los recursos actualizados después de este periodo se incluirán en la respuesta. La intención de este parámetro es permitir que un cliente solicite sólo los registros que han cambiado desde la última solicitud, basándose en la hora de la cabecera de retorno, o (para uso asíncrono), la hora de la transacción</p>
</div></td></tr><tr><td>IN</td><td>_type</td><td>0..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#code">code</a></td><td/><td><div><p>Uno o más parámetros, cada uno de los cuales contiene uno o más tipos de recursos FHIR delimitados por comas para incluirlos en los recursos devueltos. En ausencia de tipos especificados, el servidor devuelve todos los tipos de recursos</p>
</div></td></tr><tr><td>IN</td><td>count</td><td>0..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#integer">integer</a></td><td/><td><div><p>Véase la discusión más abajo sobre la utilidad de paginar los resultados de la operación $everything</p>
</div></td></tr><tr><td>OUT</td><td>return</td><td>1..1</td><td><a href="http://hl7.org/fhir/R4/bundle.html">Bundle</a></td><td/><td><div><p>El tipo de Bundle es searchset</p>
</div></td></tr></table><div><p>principales diferencias entre esta operación y la simple búsqueda en el compartimento del paciente son</p>
<p>•	A menos que el cliente solicite lo contrario, el servidor devuelve todo el conjunto de resultados en un solo paquete (en lugar de utilizar la paginación)</p>
<p>•	El servidor es responsable de determinar qué recursos debe devolver como recursos incluidos (en lugar de que el cliente especifique cuáles).
Esto libera al cliente de la necesidad de determinar lo que podría o debería pedir, especialmente en lo que respecta a los recursos incluidos. Los servidores deben considerar la devolución de Provenance y AuditTrail apropiados en los recursos devueltos, aunque éstos no formen parte directamente del compartimento del paciente.</p>
<p>Se supone que el servidor ha identificado y asegurado el contexto adecuadamente, y puede asociar el contexto de autorización con un único paciente, o determinar si el contexto tiene los derechos del paciente nominado, si lo hay, o puede determinar una lista apropiada de pacientes para los que proporcionar datos a partir del contexto de la solicitud. Si no hay un paciente nominado (GET /Patient/$everything) y el contexto no está asociado a un único registro de paciente, la lista real de pacientes es la de todos los pacientes a los que el usuario asociado a la solicitud tiene acceso. Puede tratarse de todos los pacientes de la familia a los que el paciente tiene acceso, o puede tratarse de todos los pacientes a los que un proveedor de atención tiene acceso, o de todos los pacientes del sistema de registros completo. En estos casos, el servidor puede optar por devolver un error en lugar de todos los registros. La especificación de la relación entre el contexto, un usuario y los registros de los pacientes está fuera del alcance de esta especificación (aunque véase la guía de implementación de Smart App Launch.</p>
<p>Cuando esta operación se utiliza para acceder a varios registros de pacientes a la vez, el paquete de retorno podría ser bastante grande; los servidores pueden optar por exigir que dichas solicitudes se realicen de forma asíncrona y se asocien a formatos de datos masivos. Por otra parte, los clientes pueden optar por hojear el conjunto de resultados (o los servidores pueden exigirlo). La paginación de los resultados se realiza de la misma manera que la búsqueda, utilizando el parámetro _count y los enlaces Bundle. Los implementadores deben tener en cuenta que la paginación será más lenta que la simple devolución de todos los resultados a la vez (más tráfico de red, múltiples retrasos de latencia), pero puede ser necesaria para no agotar la memoria disponible leyendo o escribiendo toda la respuesta en un solo paquete. A diferencia de la búsqueda, no hay un orden inherente al usuario para la operación $everything. Los servidores pueden considerar la posibilidad de ordenar los recursos devueltos en orden descendente de la última actualización del registro, pero no están obligados a hacerlo.</p>
<p>El parámetro *since se proporciona para soportar consultas periódicas para obtener información adicional que ha cambiado sobre el paciente desde la última consulta. Esto significa que el parámetro _since se basa en la hora del registro. El valor del parámetro *since debe ajustarse a la hora del servidor. Si se utiliza la respuesta directa, se trata de la marca de tiempo en la cabecera de la respuesta. Si se utiliza la interfaz asíncrona, se trata de la marca de tiempo de la transacción en la respuesta json. Los servidores deben asegurarse de que las marcas de tiempo se gestionen de forma que el cliente no pierda ningún cambio. Los clientes deben ser capaces de obtener la misma respuesta más de una vez en el caso de que la transacción caiga en un límite de tiempo. Los clientes deben asegurarse de que los demás parámetros de consulta sean constantes para garantizar un conjunto coherente de registros al realizar consultas periódicas.</p>
</div></div>
  </text>
  <url value="http://hl7.org/fhir/OperationDefinition/Patient-everything"/>
  <version value="0.22"/>
  <name value="$everything"/>
  <title value="Operacion $everything: Encuentro de Informaci&#xF3;n de Pacientes"/>
  <status value="draft"/>
  <kind value="operation"/>
  <date value="2021-08-26T15:10:39-04:00"/>
  <contact>
    <name value="Pablo Pizzaro"/>
    <telecom>
      <system value="email"/>
      <value value="ppizarro.delgado@minsal.cl"/>
    </telecom>
  </contact>
  <description value="Las principales diferencias entre esta operaci&#xF3;n y la simple b&#xFA;squeda en el compartimento del paciente son&#xD;&#xA;&#xD;&#xA;&#x2022;&#x9;A menos que el cliente solicite lo contrario, el servidor devuelve todo el conjunto de resultados en un solo paquete (en lugar de utilizar la paginaci&#xF3;n)&#xD;&#xA;&#xD;&#xA;&#x2022;&#x9;Al servidor es responsable de determinar qu&#xE9; recursos debe devolver como recursos incluidos (en lugar de que el cliente especifique cu&#xE1;les).&#xD;&#xA;Esto libera al cliente de la necesidad de determinar lo que podr&#xED;a o deber&#xED;a pedir, especialmente en lo que respecta a los recursos incluidos. Los servidores deben considerar la devoluci&#xF3;n de Provenance y AuditTrail apropiados en los recursos devueltos, aunque &#xE9;stos no formen parte directamente del compartimento del paciente.&#xD;&#xA;&#xD;&#xA;Se supone que el servidor ha identificado y asegurado el contexto adecuadamente, y puede asociar el contexto de autorizaci&#xF3;n con un &#xFA;nico paciente, o determinar si el contexto tiene los derechos del paciente nominado, si lo hay, o puede determinar una lista apropiada de pacientes para los que proporcionar datos a partir del contexto de la solicitud. Si no hay un paciente nominado (GET /Patient/$everything) y el contexto no est&#xE1; asociado a un &#xFA;nico registro de paciente, la lista real de pacientes es la de todos los pacientes a los que el usuario asociado a la solicitud tiene acceso. Puede tratarse de todos los pacientes de la familia a los que el paciente tiene acceso, o puede tratarse de todos los pacientes a los que un proveedor de atenci&#xF3;n tiene acceso, o de todos los pacientes del sistema de registros completo. En estos casos, el servidor puede optar por devolver un error en lugar de todos los registros. La especificaci&#xF3;n de la relaci&#xF3;n entre el contexto, un usuario y los registros de los pacientes est&#xE1; fuera del alcance de esta especificaci&#xF3;n (aunque v&#xE9;ase la gu&#xED;a de implementaci&#xF3;n de Smart App Launch.&#xD;&#xA;&#xD;&#xA;Cuando esta operaci&#xF3;n se utiliza para acceder a varios registros de pacientes a la vez, el paquete de retorno podr&#xED;a ser bastante grande; los servidores pueden optar por exigir que dichas solicitudes se realicen de forma as&#xED;ncrona y se asocien a formatos de datos masivos. Por otra parte, los clientes pueden optar por hojear el conjunto de resultados (o los servidores pueden exigirlo). La paginaci&#xF3;n de los resultados se realiza de la misma manera que la b&#xFA;squeda, utilizando el par&#xE1;metro _count y los enlaces Bundle. Los implementadores deben tener en cuenta que la paginaci&#xF3;n ser&#xE1; m&#xE1;s lenta que la simple devoluci&#xF3;n de todos los resultados a la vez (m&#xE1;s tr&#xE1;fico de red, m&#xFA;ltiples retrasos de latencia), pero puede ser necesaria para no agotar la memoria disponible leyendo o escribiendo toda la respuesta en un solo paquete. A diferencia de la b&#xFA;squeda, no hay un orden inherente al usuario para la operaci&#xF3;n $everything. Los servidores pueden considerar la posibilidad de ordenar los recursos devueltos en orden descendente de la &#xFA;ltima actualizaci&#xF3;n del registro, pero no est&#xE1;n obligados a hacerlo.&#xD;&#xA;&#xD;&#xA;El par&#xE1;metro *since se proporciona para soportar consultas peri&#xF3;dicas para obtener informaci&#xF3;n adicional que ha cambiado sobre el paciente desde la &#xFA;ltima consulta. Esto significa que el par&#xE1;metro _since se basa en la hora del registro. El valor del par&#xE1;metro *since debe ajustarse a la hora del servidor. Si se utiliza la respuesta directa, se trata de la marca de tiempo en la cabecera de la respuesta. Si se utiliza la interfaz as&#xED;ncrona, se trata de la marca de tiempo de la transacci&#xF3;n en la respuesta json. Los servidores deben asegurarse de que las marcas de tiempo se gestionen de forma que el cliente no pierda ning&#xFA;n cambio. Los clientes deben ser capaces de obtener la misma respuesta m&#xE1;s de una vez en el caso de que la transacci&#xF3;n caiga en un l&#xED;mite de tiempo. Los clientes deben asegurarse de que los dem&#xE1;s par&#xE1;metros de consulta sean constantes para garantizar un conjunto coherente de registros al realizar consultas peri&#xF3;dicas."/>
  <code value="everything"/>
  <comment value="principales diferencias entre esta operaci&#xF3;n y la simple b&#xFA;squeda en el compartimento del paciente son&#xD;&#xA;&#xD;&#xA;&#x2022;&#x9;A menos que el cliente solicite lo contrario, el servidor devuelve todo el conjunto de resultados en un solo paquete (en lugar de utilizar la paginaci&#xF3;n)&#xD;&#xA;&#xD;&#xA;&#x2022;&#x9;El servidor es responsable de determinar qu&#xE9; recursos debe devolver como recursos incluidos (en lugar de que el cliente especifique cu&#xE1;les).&#xD;&#xA;Esto libera al cliente de la necesidad de determinar lo que podr&#xED;a o deber&#xED;a pedir, especialmente en lo que respecta a los recursos incluidos. Los servidores deben considerar la devoluci&#xF3;n de Provenance y AuditTrail apropiados en los recursos devueltos, aunque &#xE9;stos no formen parte directamente del compartimento del paciente.&#xD;&#xA;&#xD;&#xA;Se supone que el servidor ha identificado y asegurado el contexto adecuadamente, y puede asociar el contexto de autorizaci&#xF3;n con un &#xFA;nico paciente, o determinar si el contexto tiene los derechos del paciente nominado, si lo hay, o puede determinar una lista apropiada de pacientes para los que proporcionar datos a partir del contexto de la solicitud. Si no hay un paciente nominado (GET /Patient/$everything) y el contexto no est&#xE1; asociado a un &#xFA;nico registro de paciente, la lista real de pacientes es la de todos los pacientes a los que el usuario asociado a la solicitud tiene acceso. Puede tratarse de todos los pacientes de la familia a los que el paciente tiene acceso, o puede tratarse de todos los pacientes a los que un proveedor de atenci&#xF3;n tiene acceso, o de todos los pacientes del sistema de registros completo. En estos casos, el servidor puede optar por devolver un error en lugar de todos los registros. La especificaci&#xF3;n de la relaci&#xF3;n entre el contexto, un usuario y los registros de los pacientes est&#xE1; fuera del alcance de esta especificaci&#xF3;n (aunque v&#xE9;ase la gu&#xED;a de implementaci&#xF3;n de Smart App Launch.&#xD;&#xA;&#xD;&#xA;Cuando esta operaci&#xF3;n se utiliza para acceder a varios registros de pacientes a la vez, el paquete de retorno podr&#xED;a ser bastante grande; los servidores pueden optar por exigir que dichas solicitudes se realicen de forma as&#xED;ncrona y se asocien a formatos de datos masivos. Por otra parte, los clientes pueden optar por hojear el conjunto de resultados (o los servidores pueden exigirlo). La paginaci&#xF3;n de los resultados se realiza de la misma manera que la b&#xFA;squeda, utilizando el par&#xE1;metro _count y los enlaces Bundle. Los implementadores deben tener en cuenta que la paginaci&#xF3;n ser&#xE1; m&#xE1;s lenta que la simple devoluci&#xF3;n de todos los resultados a la vez (m&#xE1;s tr&#xE1;fico de red, m&#xFA;ltiples retrasos de latencia), pero puede ser necesaria para no agotar la memoria disponible leyendo o escribiendo toda la respuesta en un solo paquete. A diferencia de la b&#xFA;squeda, no hay un orden inherente al usuario para la operaci&#xF3;n $everything. Los servidores pueden considerar la posibilidad de ordenar los recursos devueltos en orden descendente de la &#xFA;ltima actualizaci&#xF3;n del registro, pero no est&#xE1;n obligados a hacerlo.&#xD;&#xA;&#xD;&#xA;El par&#xE1;metro *since se proporciona para soportar consultas peri&#xF3;dicas para obtener informaci&#xF3;n adicional que ha cambiado sobre el paciente desde la &#xFA;ltima consulta. Esto significa que el par&#xE1;metro _since se basa en la hora del registro. El valor del par&#xE1;metro *since debe ajustarse a la hora del servidor. Si se utiliza la respuesta directa, se trata de la marca de tiempo en la cabecera de la respuesta. Si se utiliza la interfaz as&#xED;ncrona, se trata de la marca de tiempo de la transacci&#xF3;n en la respuesta json. Los servidores deben asegurarse de que las marcas de tiempo se gestionen de forma que el cliente no pierda ning&#xFA;n cambio. Los clientes deben ser capaces de obtener la misma respuesta m&#xE1;s de una vez en el caso de que la transacci&#xF3;n caiga en un l&#xED;mite de tiempo. Los clientes deben asegurarse de que los dem&#xE1;s par&#xE1;metros de consulta sean constantes para garantizar un conjunto coherente de registros al realizar consultas peri&#xF3;dicas."/>
  <resource value="Patient"/>
  <system value="false"/>
  <type value="true"/>
  <instance value="true"/>
  <parameter>
    <name value="start"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="El intervalo de fechas se refiere a las fechas de la atenci&#xF3;n, no a las fechas de la moneda del registro; por ejemplo, todos los registros relativos a la atenci&#xF3;n prestada en un determinado intervalo de fechas. Si no se proporciona una fecha de inicio, todos los registros anteriores a la fecha de finalizaci&#xF3;n est&#xE1;n en el &#xE1;mbito de aplicaci&#xF3;n."/>
    <type value="date"/>
  </parameter>
  <parameter>
    <name value="end"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="El intervalo de fechas se refiere a las fechas de la atenci&#xF3;n, no a las fechas de la moneda del registro; por ejemplo, todos los registros relativos a la atenci&#xF3;n prestada en un determinado intervalo de fechas. Si no se proporciona una fecha de finalizaci&#xF3;n, todos los registros posteriores a la fecha de inicio est&#xE1;n en el &#xE1;mbito de aplicaci&#xF3;n."/>
    <type value="date"/>
  </parameter>
  <parameter>
    <name value="_since"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Los recursos actualizados despu&#xE9;s de este periodo se incluir&#xE1;n en la respuesta. La intenci&#xF3;n de este par&#xE1;metro es permitir que un cliente solicite s&#xF3;lo los registros que han cambiado desde la &#xFA;ltima solicitud, bas&#xE1;ndose en la hora de la cabecera de retorno, o (para uso as&#xED;ncrono), la hora de la transacci&#xF3;n"/>
    <type value="instant"/>
  </parameter>
  <parameter>
    <name value="_type"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Uno o m&#xE1;s par&#xE1;metros, cada uno de los cuales contiene uno o m&#xE1;s tipos de recursos FHIR delimitados por comas para incluirlos en los recursos devueltos. En ausencia de tipos especificados, el servidor devuelve todos los tipos de recursos"/>
    <type value="code"/>
  </parameter>
  <parameter>
    <name value="count"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="V&#xE9;ase la discusi&#xF3;n m&#xE1;s abajo sobre la utilidad de paginar los resultados de la operaci&#xF3;n $everything"/>
    <type value="integer"/>
  </parameter>
  <parameter>
    <name value="return"/>
    <use value="out"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="El tipo de Bundle es searchset"/>
    <type value="Bundle"/>
  </parameter>
</OperationDefinition>