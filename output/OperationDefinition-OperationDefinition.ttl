@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://minsal.cl/fhir/core/OperationDefinition/OperationDefinition> a fhir:OperationDefinition;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "OperationDefinition"];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "extensions" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><h2>$match</h2><p>OPERATION: $match</p><p>The official URL for this operation definition is: </p><pre>http://hl7.org/fhir/OperationDefinition/Patient-match</pre><div><p>Un índice maestro de pacientes (MPI ) es un servicio utilizado para gestionar la identificación de pacientes en un contexto en el que existen múltiples bases de datos de pacientes.</p>\n<p>Las aplicaciones sanitarias y el middleware utilizan el MPI para cotejar los pacientes entre las bases de datos y para almacenar los datos de los nuevos pacientes a medida que se encuentran.</p>\n<p>Los MPI son aplicaciones muy especializadas, que a menudo se adaptan ampliamente a la combinación particular de pacientes de la institución. Las IPM también pueden funcionar a nivel regional y nacional.Para pedir a un MPI que haga coincidir un paciente, los clientes utilizan la operación $match, que acepta un recurso de paciente que puede estar sólo parcialmente completo.</p>\n<p>Los datos proporcionados se interpretan como una entrada MPI y son procesados por un algoritmo de algún tipo que utiliza los datos para determinar las coincidencias más apropiadas en el conjunto de pacientes. Tenga en cuenta que los diferentes algoritmos de emparejamiento MPI tienen diferentes entradas requeridas. La operación genérica $match no especifica ningún algoritmo en particular, ni un conjunto mínimo de información que debe proporcionarse cuando se pide que se realice una operación de coincidencia MPI, pero muchas implementaciones tendrán un conjunto de información mínima, que puede declararse en su definición de la operación $match especificando un perfil en el parámetro del recurso, indicando qué propiedades se requieren en la búsqueda. El recurso del paciente enviado a la operación no tiene que estar completo, ni tiene que pasar la validación (es decir, los campos obligatorios no tienen que ser rellenados), pero sí tiene que ser una instancia válida, ya que se utiliza como los datos de referencia para comparar.</p>\n</div><p>URL: [base]/Patient/$match</p><p>Parameters</p><table class=\"grid\"><tr><td><b>Use</b></td><td><b>Name</b></td><td><b>Cardinality</b></td><td><b>Type</b></td><td><b>Binding</b></td><td><b>Documentation</b></td></tr><tr><td>IN</td><td>resource</td><td>1..1</td><td><a href=\"http://hl7.org/fhir/R4/resource.html\">Resource</a></td><td/><td><div><p>Utilícelo para proporcionar un conjunto completo de datos de pacientes para que el IPM los compare (por ejemplo, envíe un registro de pacientes a Patient/$match).</p>\n</div></td></tr><tr><td>IN</td><td>onlyCertainMatches</td><td>0..1</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#boolean\">boolean</a></td><td/><td><div><p>Si hay múltiples coincidencias potenciales, entonces la coincidencia no debería devolver los resultados con esta bandera establecida en true.  Cuando es falso, el servidor puede devolver múltiples resultados con cada resultado calificado en consecuencia.</p>\n</div></td></tr><tr><td>IN</td><td>count</td><td>0..1</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#integer\">integer</a></td><td/><td><div><p>El número máximo de registros a devolver. Si no se proporciona ningún valor, el servidor decide cuántas coincidencias devolver. Tenga en cuenta que los clientes deben tener cuidado al usar esto, ya que puede impedir que se devuelvan coincidencias probables -y válidas-.</p>\n</div></td></tr><tr><td>OUT</td><td>return</td><td>1..1</td><td><a href=\"http://hl7.org/fhir/R4/bundle.html\">Bundle</a></td><td/><td><div><p>Un paquete contiene un conjunto de registros de pacientes que representan posibles coincidencias,\nopcionalmente puede contener también un OperationOutcome con más información sobre los resultados de la búsqueda\n(como advertencias o mensajes informativos, por ejemplo, un recuento de los registros que estaban cerca pero fueron eliminados)\nSi la operación no tiene éxito, se puede devolver un OperationOutcome junto con un código de estado BadRequest\n(por ejemplo, un problema de seguridad, o propiedades insuficientes en el fragmento del paciente - comprobar con el perfil)</p>\n</div></td></tr></table><div><p>La respuesta de una consulta ¨mpi¨ es un conjunto que contiene registros de pacientes, ordenados de más a menos probable. Si no hay coincidencias de pacientes, el MPI DEBERÁ devolver un conjunto de búsqueda vacío sin error, pero puede incluir un resultado de la operación con más consejos sobre la selección de pacientes. Todos los registros de pacientes TIENEN una puntuación de búsqueda de 0 a 1, donde 1 es la coincidencia más segura, junto con una extensión ¨match-grade¨ que indica la posición del MPI en la calidad de la coincidencia.</p>\n</div></div>"
  ];
  fhir:OperationDefinition.url [ fhir:value "http://hl7.org/fhir/OperationDefinition/Patient-match"];
  fhir:OperationDefinition.version [ fhir:value "0.22"];
  fhir:OperationDefinition.name [ fhir:value "$match"];
  fhir:OperationDefinition.title [ fhir:value "Operacion $match para encuentro del paciente en MPI"];
  fhir:OperationDefinition.status [ fhir:value "active"];
  fhir:OperationDefinition.kind [ fhir:value "operation"];
  fhir:OperationDefinition.date [ fhir:value "2021-08-24T13:35:22-04:00"^^xsd:dateTime];
  fhir:OperationDefinition.contact [
     fhir:index 0;
     fhir:ContactDetail.name [ fhir:value "Pablo Pizzaro" ];
     fhir:ContactDetail.telecom [
       fhir:index 0;
       fhir:ContactPoint.system [ fhir:value "email" ];
       fhir:ContactPoint.value [ fhir:value "ppizarro.delgado@minsal.cl" ]
     ]
  ];
  fhir:OperationDefinition.description [ fhir:value "Un índice maestro de pacientes (MPI ) es un servicio utilizado para gestionar la identificación de pacientes en un contexto en el que existen múltiples bases de datos de pacientes. \r\n\r\nLas aplicaciones sanitarias y el middleware utilizan el MPI para cotejar los pacientes entre las bases de datos y para almacenar los datos de los nuevos pacientes a medida que se encuentran. \r\n\r\nLos MPI son aplicaciones muy especializadas, que a menudo se adaptan ampliamente a la combinación particular de pacientes de la institución. Las IPM también pueden funcionar a nivel regional y nacional.Para pedir a un MPI que haga coincidir un paciente, los clientes utilizan la operación $match, que acepta un recurso de paciente que puede estar sólo parcialmente completo. \r\n\r\nLos datos proporcionados se interpretan como una entrada MPI y son procesados por un algoritmo de algún tipo que utiliza los datos para determinar las coincidencias más apropiadas en el conjunto de pacientes. Tenga en cuenta que los diferentes algoritmos de emparejamiento MPI tienen diferentes entradas requeridas. La operación genérica $match no especifica ningún algoritmo en particular, ni un conjunto mínimo de información que debe proporcionarse cuando se pide que se realice una operación de coincidencia MPI, pero muchas implementaciones tendrán un conjunto de información mínima, que puede declararse en su definición de la operación $match especificando un perfil en el parámetro del recurso, indicando qué propiedades se requieren en la búsqueda. El recurso del paciente enviado a la operación no tiene que estar completo, ni tiene que pasar la validación (es decir, los campos obligatorios no tienen que ser rellenados), pero sí tiene que ser una instancia válida, ya que se utiliza como los datos de referencia para comparar."];
  fhir:OperationDefinition.code [ fhir:value "match"];
  fhir:OperationDefinition.comment [ fhir:value "La respuesta de una consulta ¨mpi¨ es un conjunto que contiene registros de pacientes, ordenados de más a menos probable. Si no hay coincidencias de pacientes, el MPI DEBERÁ devolver un conjunto de búsqueda vacío sin error, pero puede incluir un resultado de la operación con más consejos sobre la selección de pacientes. Todos los registros de pacientes TIENEN una puntuación de búsqueda de 0 a 1, donde 1 es la coincidencia más segura, junto con una extensión ¨match-grade¨ que indica la posición del MPI en la calidad de la coincidencia."];
  fhir:OperationDefinition.resource [
     fhir:value "Patient";
     fhir:index 0
  ];
  fhir:OperationDefinition.system [ fhir:value "false"^^xsd:boolean];
  fhir:OperationDefinition.type [ fhir:value "true"^^xsd:boolean];
  fhir:OperationDefinition.instance [ fhir:value "false"^^xsd:boolean];
  fhir:OperationDefinition.parameter [
     fhir:index 0;
     fhir:OperationDefinition.parameter.name [ fhir:value "resource" ];
     fhir:OperationDefinition.parameter.use [ fhir:value "in" ];
     fhir:OperationDefinition.parameter.min [ fhir:value "1"^^xsd:integer ];
     fhir:OperationDefinition.parameter.max [ fhir:value "1" ];
     fhir:OperationDefinition.parameter.documentation [ fhir:value "Utilícelo para proporcionar un conjunto completo de datos de pacientes para que el IPM los compare (por ejemplo, envíe un registro de pacientes a Patient/$match)." ];
     fhir:OperationDefinition.parameter.type [ fhir:value "Resource" ]
  ], [
     fhir:index 1;
     fhir:OperationDefinition.parameter.name [ fhir:value "onlyCertainMatches" ];
     fhir:OperationDefinition.parameter.use [ fhir:value "in" ];
     fhir:OperationDefinition.parameter.min [ fhir:value "0"^^xsd:integer ];
     fhir:OperationDefinition.parameter.max [ fhir:value "1" ];
     fhir:OperationDefinition.parameter.documentation [ fhir:value "Si hay múltiples coincidencias potenciales, entonces la coincidencia no debería devolver los resultados con esta bandera establecida en true.  Cuando es falso, el servidor puede devolver múltiples resultados con cada resultado calificado en consecuencia." ];
     fhir:OperationDefinition.parameter.type [ fhir:value "boolean" ]
  ], [
     fhir:index 2;
     fhir:OperationDefinition.parameter.name [ fhir:value "count" ];
     fhir:OperationDefinition.parameter.use [ fhir:value "in" ];
     fhir:OperationDefinition.parameter.min [ fhir:value "0"^^xsd:integer ];
     fhir:OperationDefinition.parameter.max [ fhir:value "1" ];
     fhir:OperationDefinition.parameter.documentation [ fhir:value "El número máximo de registros a devolver. Si no se proporciona ningún valor, el servidor decide cuántas coincidencias devolver. Tenga en cuenta que los clientes deben tener cuidado al usar esto, ya que puede impedir que se devuelvan coincidencias probables -y válidas-." ];
     fhir:OperationDefinition.parameter.type [ fhir:value "integer" ]
  ], [
     fhir:index 3;
     fhir:OperationDefinition.parameter.name [ fhir:value "return" ];
     fhir:OperationDefinition.parameter.use [ fhir:value "out" ];
     fhir:OperationDefinition.parameter.min [ fhir:value "1"^^xsd:integer ];
     fhir:OperationDefinition.parameter.max [ fhir:value "1" ];
     fhir:OperationDefinition.parameter.documentation [ fhir:value "Un paquete contiene un conjunto de registros de pacientes que representan posibles coincidencias, \r\n    opcionalmente puede contener también un OperationOutcome con más información sobre los resultados de la búsqueda \r\n	(como advertencias o mensajes informativos, por ejemplo, un recuento de los registros que estaban cerca pero fueron eliminados) \r\n	Si la operación no tiene éxito, se puede devolver un OperationOutcome junto con un código de estado BadRequest \r\n	(por ejemplo, un problema de seguridad, o propiedades insuficientes en el fragmento del paciente - comprobar con el perfil)" ];
     fhir:OperationDefinition.parameter.type [ fhir:value "Bundle" ]
  ] .

# - ontology header ------------------------------------------------------------

<http://minsal.cl/fhir/core/OperationDefinition/OperationDefinition.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

